#### 主流架构模型-SOA架构和微服务架构
>SOA（Service Oriented Architecture），“面向服务的架构”，是一种设计方法，其中包含多个服务，服务间通过相互依赖最终提供一系列功能。  一个服务通常独立存在于进程中。各服务间通过网络调用。  
与SOA相提并论——ESB（企业服务总线），类似一根管道，连接各服务节点。为集成不同系统、不同协议的服务，ESB 做了消息的转化解释和路由，让不同服务互联互通。

- SOA解决的问题
>- 系统集成：系统角度，解决企业系统间的通信问
题，把原先散乱、无规划的系统间网状结构，梳理成
规整、可治理的系统间星形结构，eg.引入ESB、技术规范、服务管理规范。解决核心问题【有序】
>- 系统的服务化：功能角度，把业务逻辑抽象成
可复用、可组装的服务，通过服务编排实现业务的
快速再生。目的：把原先固有的业务功能转变为通用
的业务服务，实现业务逻辑的快速复用。解决
核心问题【复用】
>- 业务的服务化：企业角度，把企业职能抽象成
可复用、可组装的服务，架构：职能化->服务化。前二者从技术层面解决系统调用、功能复用的问题。第三点：业务驱动把一个业务单元封装成一项服务。解决核心问题【高效】

- 微服务架构
>和SOA架构类似,是在SOA上做的升华，强调重点：“业务需彻底组件化和服务化”。  
原有单业务系统拆分为多个可独立开发、设计、运行的小应用。它们之间通过服务完成交互和集成。    
组件：可独立更换和升级的单元，eg.CPU、内存、显卡、硬盘。类比PC作为组件以服务方式构建，只需维护主板和一些外部设备。假如PC需调用CPU计算，只需知道该组件的地址。

- 微服务特征
>①通过服务组件化；  
②按业务能力划分服务和开发团队；  
③去中心化；  
④基础设施自动化（devops、自动化部署）。

- SOA和微服务架构差别
>①微服务不再强调SOA架构的ESB企业服务总线；SOA 的思想：单业务系统内部实现组件化；  
②Docker的出现，为微服务提供了便利，eg.更小的部署单元，可通过Node或SpringBoot启动进程提供服务；
③SOA注重：系统集成，微服务关注：完全分离。

#### 领域驱动设计及业务驱动划分
- 领域驱动设计概念
>DDD（Domain-Driven Design），即开发前通常要进行：①大量业务知识梳理；②软件设计；③开发。  
领域驱动设计基本概念：业务知识梳理中，必会形成某个领域知识，根据领域知识一步步驱动软件设计。

- 为何需DDD
>业务初期：功能简单(CRUD)，系统清晰。  
产品不断迭代和演化，业务越来越复杂，系统也越来越冗余，各模块彼此关联，甚至连作者都很难说清模块的具体功能意图。  
维护代码时，将牵一发而动全身，eg.只想改评价相关功能，却影响创建订单。虽可加大测试保证功能完备性，但当有大量需求并行开发时，改动重叠、恶性循环、疲于奔命修改各种问题。  
一般解决方案：不断重构系统，系统设计随业务成长不断演进。但很难给一个业务上的含义，只能以技术纬度描述。  
问题：接手代码时不知含义或可修改这块通用逻辑来达到某些需求。

- 领域模型追本溯源
>早期领域模型：数据库设计。   
传统项目流程：①讨论需求；②数据库建模；③需求逐步确定间，不断更新数据库设计；④开发阶段，不断
调整设计，eg.有些关系没建、字段少了、表结构不合理；⑤上线。  
此时数据库是项目根本，开发都是围绕着数据模型展开，形成如下：  
>>①service很重（基本包括所有逻辑处理）；  
②POJO作为service层非常重要的实体，会因不同场景做不同的变化和组合，造成pojo模型：失血、贫血、充血（形容领域模型太胖或太瘦）。  
业务变复杂后，数据结构的变化，各模块需修改，经不断演化变得复杂、冗余、耦合度高。  
DDD需考虑的问题：若程序不依赖数据库存储设备，领域模型就得基于程序本身来设计。